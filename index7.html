<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>AR Bubble Shooter</title>

<script type="module"
  src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js">
</script>

<style>
  body {
    margin: 0;
    overflow: hidden;
    background: black;
  }

  .bubble {
    width: 36px;
    height: 36px;
    border-radius: 50%;
    background: radial-gradient(circle, #9cf, #38f);
    position: absolute;
    cursor: pointer;
  }

  .target {
    background: radial-gradient(circle, #f99, #c33);
  }

  .pop {
    animation: pop 0.3s forwards;
  }

  @keyframes pop {
    to {
      transform: scale(2);
      opacity: 0;
    }
  }
</style>
</head>

<body>

<model-viewer
  id="viewer"
  src="https://modelviewer.dev/shared-assets/models/Astronaut.glb"
  camera-controls
  auto-rotate
  style="width:100vw;height:100vh;"
>
  <div class="target bubble green" data-score="10"
     style="position:absolute; top:40%; left:40%;"></div>

<div class="target bubble red" data-score="-5"
     style="position:absolute; top:30%; left:60%;"></div>

</model-viewer>

<!-- Shooter bubble -->
<div id="shooter" class="bubble" style="left:50%; bottom:30px;"></div>

<!-- Target bubbles -->
<div class="bubble target" style="left:40%; top:120px;"></div>
<div class="bubble target" style="left:55%; top:160px;"></div>
<div class="bubble target" style="left:48%; top:220px;"></div>

<script>
let score = 0;

const shooter = document.getElementById("shooter");

shooter.addEventListener("click", shootBubble);

function shootBubble() {
  const bubble = shooter.cloneNode(true);
  document.body.appendChild(bubble);

  let x = shooter.offsetLeft;
  let y = shooter.offsetTop;

  bubble.style.left = x + "px";
  bubble.style.top = y + "px";
  bubble.style.bottom = "auto";

  function move() {
    y -= 8; // speed
    bubble.style.top = y + "px";

    if (y < -40) {
      bubble.remove();
      return;
    }
    requestAnimationFrame(move);
  }

  move();
}
</script>
<script>
function isColliding(a, b) {
  const r1 = a.getBoundingClientRect();
  const r2 = b.getBoundingClientRect();

  return !(
    r1.top > r2.bottom ||
    r1.bottom < r2.top ||
    r1.left > r2.right ||
    r1.right < r2.left
  );
}
</script>


</body>
</html>
