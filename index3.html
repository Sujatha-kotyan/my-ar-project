<!DOCTYPE html>
<html>
<head>
  <script type="module"
    src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js">
  </script>

  <style>
    body { margin: 0; background: #111; }
    model-viewer {
      width: 100vw;
      height: 100vh;
    }
  </style>
</head>

<body>

<model-viewer
  id="viewer"
  src="https://modelviewer.dev/shared-assets/models/Astronaut.glb"
  camera-controls
  autoplay>
</model-viewer>

<script>
const viewer = document.getElementById("viewer");
let danceInterval = null;

/* Reset everything */
function reset() {
  clearInterval(danceInterval);
  viewer.cameraOrbit = "0deg 75deg 2.5m";
}

/* ðŸ¦˜ JUMP */
function jump() {
  reset();
  viewer.cameraOrbit = "0deg 60deg 2.2m";
  setTimeout(() => {
    viewer.cameraOrbit = "0deg 75deg 2.5m";
  }, 300);
}

/* ðŸ’ƒ DANCE */
function dance() {
  reset();
  let angle = 0;
  danceInterval = setInterval(() => {
    angle += 2;
    viewer.cameraOrbit = `${angle}deg 75deg 2.5m`;
  }, 30);
}

/* ðŸ‘‹ WAVE */
function wave() {
  reset();
  viewer.cameraOrbit = "30deg 75deg 2.2m";
  setTimeout(() => {
    viewer.cameraOrbit = "-30deg 75deg 2.2m";
  }, 300);
}

/* ðŸ“© Storyline messages */
window.addEventListener("message", (event) => {
  switch (event.data) {
    case 1: reset(); break;
    case 2: jump(); break;
    case 3: wave(); break;
    case 4: dance(); break;
  }
});
</script>

</body>
</html>
