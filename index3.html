<!DOCTYPE html>
<html>
<head>
  <title>Chapter 8 â€“ Model Control</title>

  <script type="module"
    src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js">
  </script>

  <style>
    body {
      margin: 0;
      background: #111;
    }
    model-viewer {
      width: 100vw;
      height: 100vh;
    }
  </style>
</head>

<body>

<model-viewer
  id="viewer"
  src="https://modelviewer.dev/shared-assets/models/Astronaut.glb"
  camera-controls
  animation-name="Idle"
  autoplay>
</model-viewer>

<script>
const viewer = document.getElementById("viewer");

/* Model loaded */
viewer.addEventListener("load", () => {
  console.log("âœ… Model loaded");
  console.log("ðŸŽ­ Available animations:", viewer.availableAnimations);
});

/* Helper to restart animation cleanly */
function playAnim(name) {
  viewer.pause();
  viewer.currentTime = 0;
  viewer.animationName = name;
  viewer.play();
}

/* Listen to Storyline messages */
window.addEventListener("message", (event) => {
  if (!viewer || !viewer.loaded) return;

  switch (event.data) {

    case 1:
      playAnim("Idle");
      break;

    case 2:
      playAnim("Jump");
      break;

    case 3:
      playAnim("Wave");
      break;

    case 4:
      playAnim("Dance");
      break;
  }
});
</script>

</body>
</html>
