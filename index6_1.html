<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>AR Bubble Pop</title>

<script type="module"
  src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js">
</script>

<style>
  body {
    margin: 0;
    overflow: hidden;
    background: black;
  }

.bubble {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  animation: float 2s infinite ease-in-out;
  cursor: pointer;
}

.blue { background: radial-gradient(circle, #9cf, #38f); }
.green { background: radial-gradient(circle, #9f9, #2c7); }
.red { background: radial-gradient(circle, #f99, #c33); }

.pop {
  animation: pop 0.3s forwards;
}

@keyframes pop {
  to {
    transform: scale(2);
    opacity: 0;
  }
}


  @keyframes float {
    0% { transform: translateY(0); }
    50% { transform: translateY(-15px); }
    100% { transform: translateY(0); }
  }
</style>
</head>

<body>
<audio id="popSound" src="https://assets.mixkit.co/sfx/preview/mixkit-bubble-pop-up-alert-notification-2357.mp3"></audio>
<audio id="badSound" src="https://assets.mixkit.co/sfx/preview/mixkit-arcade-retro-game-over-213.mp3"></audio>

<model-viewer
  id="viewer"
  src="https://modelviewer.dev/shared-assets/models/Astronaut.glb"
  camera-controls
  auto-rotate
  style="width:100vw;height:100vh;"
>

  <div slot="hotspot-1" data-position="0m 1m -2m" class="bubble"></div>
  <div slot="hotspot-2" data-position="0.6m 1.3m -2.5m" class="bubble"></div>
  <div slot="hotspot-3" data-position="-0.6m 1.1m -2.3m" class="bubble"></div>

</model-viewer>

<script>
let score = 0;

const popSound = document.getElementById("popSound");
const badSound = document.getElementById("badSound");

document.querySelectorAll(".bubble").forEach(bubble => {
  bubble.addEventListener("click", () => {
    const value = parseInt(bubble.dataset.score);

    score += value;

    bubble.classList.add("pop");

    if (value > 0) popSound.play();
    else badSound.play();

    parent.postMessage(
      { type: "SCORE", value: score },
      "*"
    );

    console.log("Bubble:", value, "Total:", score);
  });
});
</script>

</body>
</html>
