<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>AR Bubble Pop</title>

<script type="module"
  src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js">
</script>

<style>
  body {
    margin: 0;
    overflow: hidden;
    background: black;
  }

  .bubble {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background: radial-gradient(circle, #9cf, #38f);
    animation: float 2s infinite ease-in-out;
    cursor: pointer;
  }

  @keyframes float {
    0% { transform: translateY(0); }
    50% { transform: translateY(-15px); }
    100% { transform: translateY(0); }
  }
</style>
</head>

<body>

<model-viewer
  id="viewer"
  src="https://modelviewer.dev/shared-assets/models/Astronaut.glb"
  camera-controls
  auto-rotate
  style="width:100vw;height:100vh;"
>

  <div slot="hotspot-1" data-position="0m 1m -2m" class="bubble"></div>
  <div slot="hotspot-2" data-position="0.6m 1.3m -2.5m" class="bubble"></div>
  <div slot="hotspot-3" data-position="-0.6m 1.1m -2.3m" class="bubble"></div>

</model-viewer>

<script>
let score = 0;

document.querySelectorAll(".bubble").forEach(bubble => {
  bubble.addEventListener("click", () => {
    bubble.style.transform = "scale(0)";
    bubble.style.opacity = "0";
    score++;

    // Send score to Storyline
    parent.postMessage(
      { type: "SCORE", value: score },
      "*"
    );

    console.log("Bubble popped. Score:", score);
  });
});
</script>

</body>
</html>
