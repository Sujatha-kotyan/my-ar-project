<!DOCTYPE html>
<html>
<head>
  <title>Chapter 8 â€“ Model Control</title>
  <script type="module"
    src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js">
  </script>

  <style>
    body { margin: 0; background: #111; }
    model-viewer {
      width: 100vw;
      height: 100vh;
    }
  </style>
</head>

<body>

<model-viewer
  id="model"
  src="https://modelviewer.dev/shared-assets/models/Astronaut.glb"
  camera-controls
  auto-rotate
  exposure="1"
  shadow-intensity="1">
</model-viewer>

<script>
let model;

const viewer = document.getElementById("viewer");

viewer.addEventListener("load", () => {
  model = viewer.model;
  console.log("âœ… Model ready");
});

function randomColor() {
  const material = model.materials[0];
  material.pbrMetallicRoughness.setBaseColorFactor([
    Math.random(),
    Math.random(),
    Math.random(),
    1
  ]);
}

window.addEventListener("message", function (event) {
  console.log("ðŸ“© Received:", event.data);

  switch (event.data) {
    case 1:
      viewer.autoRotate = true;
      break;

    case 2:
      viewer.autoRotate = false;
      break;

    case 3:
      viewer.cameraOrbit = "45deg 75deg 2.5m";
      break;

    case 4:
      randomColor();
      break;
  }
});
</script>



</body>
</html>
